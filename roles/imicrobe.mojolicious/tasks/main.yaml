---
- name: install gcc required to build some Perl modules
  yum: 
    name: gcc
    state: present

- name: install fresh perl to /usr/local/bin/perl
  shell: |
    cd /tmp
    wget http://www.cpan.org/src/5.0/perl-5.24.1.tar.gz
    tar -xzf perl-5.24.1.tar.gz
    cd perl-5.24.1
    ./Configure -des
    make
    make install

- name: install cpanm
  shell: curl -L https://cpanmin.us | /usr/local/bin/perl - --sudo App::cpanminus

- name: install zlib-devel - needed for DBD::mysql
  yum:
    name: zlib-devel
    state: latest

- name: install openssl-devel - needed for DBD::mysql
  yum:
    name: openssl-devel
    state: latest

- name: create ~/.my.conf
  template:
    src: ./templates/my.cnf.j2
    dest: /home/imicrobe/.my.cnf
    owner: imicrobe
    group: imicrobe
    mode: "u+rw,g-rwx,o-rwx"
